---
#########################################################################################
# Video source being monitored
videoSource:
  # video source system entry name (as recorded by the system control node)
  name: "test-video"
  # the expected duration of each video segment in secs
  segmentDurationInSec: 4

#########################################################################################
# Local video cache configuration
cache:
  # Cache entry retention check interval in secs
  retentionCheckIntInSec: 60

#########################################################################################
# Sqlite persistence configuration
sqlite:
  # Sqlite DB file path
  db: /tmp/test-edge-node.db

#########################################################################################
# Video source monitor configuration
monitor:
  # Playlist receiver REST API configuration
  api:
    # HTTP hosting server configuration
    service:
      # HTTP server binding interface
      listenOn: 0.0.0.0
      # HTTP server binding port
      appPort: 8080
      # Connection timeout configurations in seconds
      timeoutSecs:
        # Maximum duration for reading the entire request, including the body in seconds.
        # A zero or negative value means there will be no timeout.
        read: 60
        # Maximum duration before timing out writes of the response in seconds. A zero
        # or negative value means there will be no timeout.
        write: 60
        # Maximum amount of time to wait for the next request when keep-alives are enabled
        # in seconds. If IdleTimeout is zero, the value of ReadTimeout is used. If both
        # are zero, there is no timeout.
        idle: 300
    # API endpoint settings
    apis:
      # Endpoint parameters
      endPoint:
        # Endpoint path prefix for the APIs
        pathPrefix: /
      # Request logging parameters
      requestLogging:
        # HTTP header containing the API request ID
        requestIDHeader: X-Request-ID
        # List of headers to not include in logging metadata
        skipHeaders:
          - "WWW-Authenticate"
          - "Authorization"
          - "Proxy-Authenticate"
          - "Proxy-Authorization"

  # Tracking window is the duration in time a video segment is tracked. After observing
  # a new segment, that segment is remembered for the duration of a tracking window, and
  # forgotten after that.
  trackingWindow: 60

  # Number of worker threads in the video segment reader
  segmentReaderWorkerCount: 4

#########################################################################################
# Local Live VOD server configuration
vod:
  # REST API configuration
  api:
    # HTTP hosting server configuration
    service:
      # HTTP server binding interface
      listenOn: 0.0.0.0
      # HTTP server binding port
      appPort: 8081
      # Connection timeout configurations in seconds
      timeoutSecs:
        # Maximum duration for reading the entire request, including the body in seconds.
        # A zero or negative value means there will be no timeout.
        read: 60
        # Maximum duration before timing out writes of the response in seconds. A zero
        # or negative value means there will be no timeout.
        write: 60
        # Maximum amount of time to wait for the next request when keep-alives are enabled
        # in seconds. If IdleTimeout is zero, the value of ReadTimeout is used. If both
        # are zero, there is no timeout.
        idle: 300
    # API endpoint settings
    apis:
      # Endpoint parameters
      endPoint:
        # Endpoint path prefix for the APIs
        pathPrefix: /
      # Request logging parameters
      requestLogging:
        # HTTP header containing the API request ID
        requestIDHeader: X-Request-ID
        # List of headers to not include in logging metadata
        skipHeaders:
          - "WWW-Authenticate"
          - "Authorization"
          - "Proxy-Authenticate"
          - "Proxy-Authorization"

  # Number of video segments to include when building a live VOD playlist.
  liveVODSegmentCount: 2

  # when a segment is read from cold storage, store it in local cache with this TTL in secs.
  segmentCacheTTLInSec: 300

#########################################################################################
# Edge Node PubSub request-response client configuration
requestResponse:
  # GCP project to operate in
  gcpProject: development
  # Number of support workers to spawn to process inbound requests
  supportWorkerCount: 2
  # Outbound request timeout enforcement check interval in secs
  requestTimeoutEnforceIntInSec: 60
  # PubSub topic this client listen on for inbound request
  self:
    # Pubsub topic to subscribe to
    topic: local-dev-edge-node
    # Message retention within the subscription in secs
    msgTTL: 600

  # PubSub topic for reaching system control
  systemControlTopic: local-dev-ctrl-node

  # Max duration for outbound request in secs
  outboundRequestDurationInSec: 30
